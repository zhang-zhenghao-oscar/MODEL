# 基于手机交互的城市共享停车系统模型
杭州市崇文世纪城实验学校
成果作者■501 章正颢  505  王景浩    学术指导■费杰
## 一、问题的提出                                
                    
                              
没有调查就没有发言权，要想解决问题，首先要找到问题的原因，我们首先查找了国内的城市车辆数据：截至2021年底，我们国汽车保有量已达2.17亿辆，较2010年增长138%，据国家信息中心预计，至2021年这个数字将达到2.5亿。2020年国内汽车产量2994.2万辆，同比增长3.2%。而同时据国家发改委数据显示，2019年全国新建停车场项目约1.2万个，新增停车位约540万个，其中公共停车位约200万个，其余为配建停车位。2019新增停车位与新增汽车销量的比值为1:4.5。这就意味着原来近6千万的停车位缺口不仅没有被填补，反而还会加大，车主们“停车难”的问题依然令人头疼。  
除了车位供应的问题之外，CBNData《报告》显示，30%的拥堵问题是由停车难造成，日常48%的车辆须在车场排队，其中医院排队尤为严重；九成以上城市车位使用率小于50%。因此，如果能够提高停车利用率，让停车场都能充分利用起来，一定能大大缓解停车难的问题。
                 
 

CBNData《报告》中还显示，城市不同场所的停车情况差异很大：
（一）商业综合体
商业综合体高峰期（11-20点）的车流量远高于其他类物业；其中，峰值18点车流量为各类物业平均车流量的1.9倍，这种集中且大规模的车流量特点给停车场的运营造成较大压力。
（二）商务写字楼
商务写字楼的特征是停车场规模小、进出车辆复杂度高、工作日早晚高峰容易拥堵。
（三）公共设施
以医院和公共场馆为代表的公共设施类车场主要以临停车辆为主，交易付费率普遍高于各类车场平均水平，高峰时段占比超过50%，使得原本就停车位资源紧张的公共设施排队情况尤为严重，医院峰值排队车辆占比达到79%。
（四）交通枢纽
以机场、火车站为代表的交通枢纽停车场主要服务于为接送旅客而快速进出停车场的汽车，车辆平均停留时间为2.1小时，低于平均水平的4.9小时；车位日周转次数为4.4次，高于平均水平的2.2次。
（五）住宅
根据CBNData《报告》显示，住宅小区停车场内长租车辆占比达43%，长租单次停车时长18小时，而日间主要时段使用率低于50%，有大量空闲车位。
             
 
## 二、创作设想
（一）选择标志性地域作为模型展示区域
       利用Laser maker制作作品模型。
（二）确定需实现的功能及可行性评
   将								
（三）梳理思维导图及流程图
（四）用X-Mind制作思维导图。思维导图主要分为
（五）使用APP Inventor程序进行程序开发
## 三、制作过程
（一）梳理思维导图来确定主题
     
  
（二）APP程序开发
在APP的开发上我们选择了以图形化开发为主要方式的APP Inventor网站。
  

    首先根据思维导图划分功能页面，分配好各个页面应该呈现的信息及功能。接着从启动页面逐个编写界面和逻辑部分，做好数据的存取和判断。
    蓝牙连接的实现。蓝牙是app与模型进行交互的桥梁，是整个系统得以成功运行的基础，因此蓝牙的连接是最先需要攻克的难关，在搜索学习了APP Inventor的蓝牙组件使用方式之后我们编写了相关代码，但在实际使用测试中经常遇到app弹出设备未开启，连接失败等错误的情况，并且能够发送的数据格式也十分有限，只能发送数字，因此只能通过mixly端的代码对不同的数字信号进行判断，执行不同的操作，而报错信息经过多次尝试后，发现是因为在一个界面中连接蓝牙后只能在当前页面中使用，而在多个页面需要用户反复连接蓝牙会体验不佳，因此我们决定将蓝牙发送信号的操作集中在同一个页面：
 
    获取网络数据。为了实现多用户能够同时使用并保持数据的一致性，我们决定使用网络微数据库来存储车位数据，这样当一个车位被预约后，其他车主也能知道当前车位已经不可用，车位管理员对车位的操作也能实时同步，但APP Inventor提供的网络存储功能只能按照键值对存储，对停车场-停车位-停车时间段这样的多层数据结构如何存储，我们进行了多次尝试，对网络微数据库获取的值如何解析有了更深入的了解，最后选定用一个列表来存储停车场名字，再用停车场名字作为键去取停车场车位数据，用二层列表来表示车位数据，基本实现了预期效果：
 
              
 
                
在攻克以上几个问题后，剩下的编码过程相对容易一些，只是有些繁琐，需要注意一些细节。
（三）对数据进行可视化转换
针对停车场和停车位的数据，如所有停车场在不同时间段的停车率，不同种类的停车场在不同时间段的停车率，不同停车场的停车位数量分布等等，我们通过使用python进行简单的计算，并利用seaborn和matplotlib库进行处理，完成一些数据的可视化展示。
             
  
（四）制作城市共享停车系统模型
    设计模型，绘制激光切割文件。为了使模型尽量能够反应实际情景，我们尽量使车位，马路等宽度保持合理的比例，在材料选择上，我们选择比较有弹性，易于改动的雪弗板作为平面，再使用木板打印出一个底部盒子来放置硬件并作为支撑。

    模型拼接与固定。确保打印出的激光切割文件正确之后，使用热熔胶枪将各个组件连接并固定好。

 
    
    硬件编程调试与固定。挑选出需要使用的硬件后，我们将硬件通过预留的孔位固定在模型上，并编写mixly代码控制硬件的初始化和启动。
 
                               
  我们使用不干胶来制作马路和车道，装饰草垛制作模型。
（五）作品说明文档撰写

## 四、主要贡献与创新点
我们的作品主要有以下创新点：
（一）数据共享
用户操作实时更新，进行的预约停车的等操作数据将存入网络数据库，方便各方进行数据管理，对用户使用情况进行追踪，对市政建设开发提供数据支持。
（二）提高效率
用户泊车前可进行查看闲置车位，减少了到实地寻找车位的时间；在水位过高时，物业人员可第一时间进行预警提醒，告知相关部门和用户。
（三）成本低廉，使用方便
此APP可以安装在任何Android手机上，用户使用方便快捷。
（四）构建系统奖惩制度
用户需在预约时间内进行泊车并驶离，如有违约情况会影响信誉分，奖惩制度有助于维护系统秩序。
五、研究与开发体会
（一）熟悉了软件开发过程
软件开发是个非常复杂的过程，我们选择了适合学生使用的APP Inventor作为开发工具，虽然一定程度上牺牲了app的功能性，但更易于学习，开发起来也更快。
在学习制作app的过程中，我们遇到了很多问题，例如如何使用网络数据库存储停车场的车位状态数据，如何使用app发送蓝牙信号与硬件设备交互等等，同时还要注意在整个停车过程中各个状态变量的保存和变化，我们的统筹思维能力得到了很大锻炼。
（二）培养了空间想象能力和结构设计能力
在这次的作品中我们使用了雪弗板和木板进行激光切割并拼接成模型，将2D平面部件组装成3D模型，需要在实际动手之前需要进行详细的设计并绘出精确的图纸，最大程度上避免错误和浪费材料，这就要求一定的空间想象能力和缜密的思维。
（三）学习了简单的硬件开发
在实体模型中，我们使用了蓝牙接收app的信号，使用LED灯，LCD屏幕和舵机来针对app发出的额信号做出相应的反应，模拟实际停车系统，同时用水位传感器和蜂鸣器模拟水位警报系统，其中蓝牙组件的使用不同于一般的感应器和执行器，经过多次尝试才成功实现效果，在这个过程中，我们的搜集资料和抗压能力也得到了锻炼。
